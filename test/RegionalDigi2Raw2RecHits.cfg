
process RegionalDigi2Raw2RecHits = 
{
    # message logger
    include "DQM/SiStripCommon/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "INFO"
    replace MessageLogger.cerr.threshold = "INFO"
    replace MessageLogger.error.threshold = "INFO"
    replace MessageLogger.event.threshold = "INFO"
    replace MessageLogger.debug.threshold = "INFO"

    # initialize magnetic field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

    # event setup
    include "Geometry/TrackerRecoData/data/trackerRecoGeometryXML.cfi"
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
    include "CondCore/DBCommon/data/CondDBSetup.cfi"
    include "HLTrigger/Configuration/data/rawToDigi/SiStripDBCabling.cfi"
    include "CalibTracker/SiStripConnectivity/data/SiStripConnectivity.cfi"
    include "CalibTracker/SiStripConnectivity/data/SiStripRegionConnectivity.cfi"

    # physics source
    include "EventFilter/SiStripRawToDigi/data/PoolSource.cfi"
    replace maxEvents.input = 100

    # digi-to-raw
    include "EventFilter/SiStripRawToDigi/data/DigiToRaw.cfi"
    replace DigiToRaw.InputModuleLabel = "siStripDigis"  
    replace DigiToRaw.FedReadoutMode = "ZERO_SUPPRESSED" 

    # raw-to-clusters
    include "CalibTracker/Configuration/data/SiStrip_FakeGain.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakeNoise.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakePedestals.cff"
    include "EventFilter/SiStripRawToDigi/data/SiStripRawToClusters.cff"

    # clusters-to-rechits
    include "CalibTracker/SiStripLorentzAngle/data/SiStripLAFakeESSource.cfi"
    include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
    include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
    include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitConverter.cfi"
    replace siStripMatchedRecHits.ClusterProducer = "SiStripRoI"
    replace siStripMatchedRecHits.Regional = true

    # path
    path p = {DigiToRaw, sistriprawtoclusters, siStripMatchedRecHits}
}

