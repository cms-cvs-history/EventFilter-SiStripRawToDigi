process ValidateSiStripDigis = {
  include "DQM/SiStripCommon/data/MessageLogger.cfi"
  replace MessageLogger.cout.threshold = "INFO"
  replace MessageLogger.cerr.threshold = "WARNING"
  
  include "IORawData/SiStripInputSources/data/EmptySource.cff"
  replace maxEvents.input = 10000
  include "CalibTracker/SiStripConnectivity/data/FedCablingTrivialBuilder.cfi"
  replace FedCablingTrivialBuilder.NumberOfFeds = 400
  
  module SiStripDigiSource = SiStripTrivialDigiSource {
    untracked bool TestDistribution = false
    untracked double MeanOccupancy = 1.0
    untracked double RmsOccupancy = 0.0
  }
  
  module SiStripDigiToRaw = SiStripDigiToRawModule {
    string InputModuleLabel = "SiStripDigiSource"
    string InputDigiLabel = ""
    untracked string FedReadoutMode = "ZERO_SUPPRESSED"
  }
  
  include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
  replace SiStripDigis.ProductLabel = "SiStripDigiToRaw"
  
  module ValidateSiStripDigis = SiStripDigiValidator {
    untracked InputTag Collection1 = SiStripDigiSource
    untracked InputTag Collection2 = SiStripDigis:ZeroSuppressed
  }
  
  module PoolOutput = PoolOutputModule {
    untracked string fileName = "out.root"
  }
  
  module dump = EventContentAnalyzer { }
  
  path p = { SiStripDigiSource, SiStripDigiToRaw, SiStripDigis, ValidateSiStripDigis }
  endpath e = { PoolOutput }
}
