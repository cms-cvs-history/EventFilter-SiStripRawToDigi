process ValidateDigiToRawToDigi = {

    include "DQM/SiStripCommon/data/MessageLogger.cfi"

    service = Timing {}
    #service = Tracer {}
    #service = SimpleMemoryCheck {}
    #service = SimpleProfiling {}

    #include "CalibTracker/SiStripConnectivity/data/FedCablingTrivialBuilder.cfi"
    include "CalibTracker/SiStripESProducers/data/SiStripFedCablingFakeESSource.cfi"
    
    include "IORawData/SiStripInputSources/data/EmptySource.cff"
    replace maxEvents.input = 1
    
    module SiStripDigiSource = SiStripTrivialDigiSource {
	untracked double MeanOccupancy    = 1.0
	untracked double RmsOccupancy     = 0.0
	untracked int32  PedestalLevel    = 0
	untracked bool   FedRawDataMode   = false 
	untracked bool   UseFedKey        = false
    }
    
    module SiStripDigiToRaw = SiStripDigiToRawModule {
	string           InputModuleLabel = "SiStripDigiSource"
	string           InputDigiLabel   = ""
	untracked string FedReadoutMode   = "ZERO_SUPPRESSED"
	untracked bool   UseFedKey        = false
    }
    
    module SiStripDigis = SiStripRawToDigiModule 
    {
	untracked string ProductLabel = "SiStripDigiToRaw"
	untracked bool   UseFedKey    = false
    }
    
    module ValidateSiStripDigis = SiStripDigiValidator {
	untracked InputTag Collection1    = SiStripDigiSource
	untracked InputTag Collection2    = SiStripDigis:ZeroSuppressed
	untracked bool     FedRawDataMode = false
    }

    // contain "replaces" (only one can be uncommented!)
    include "EventFilter/SiStripRawToDigi/test/data/ValidateDigiToRawToDigiZS.cff"
    #include "EventFilter/SiStripRawToDigi/test/data/ValidateDigiToRawToDigiVR.cff"
    #include "EventFilter/SiStripRawToDigi/test/data/ValidateDigiToRawToDigiVRFK.cff" 
    #include "EventFilter/SiStripRawToDigi/test/data/ValidateDigiToRawToDigiPR.cff"
    #include "EventFilter/SiStripRawToDigi/test/data/ValidateDigiToRawToDigiPRFK.cff" 

    path p = { SiStripDigiSource, SiStripDigiToRaw, SiStripDigis, ValidateSiStripDigis }
    
    module dump = EventContentAnalyzer { }
    
    #endpath e = { dump }
    
}
