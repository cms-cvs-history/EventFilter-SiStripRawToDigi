
process PhysicsClusterProducer = 
{

    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "WARNING"
    
    include "EventFilter/SiStripRawToDigi/data/PhysicsSource.cff"
    replace PoolSource.maxEvents = 100
    
    include "CondCore/DBCommon/data/CondDBSetup.cfi"
    es_source pool1 = PoolDBESSource { 
	using CondDBSetup
	VPSet toGet = {
	    { string record = "SiStripFedCablingRcd"
		string tag = "SiStripFedCabling_v1"
	    } 
	}
	bool loadAll = true
	string connect = "sqlite_file:sistripfedcabling.db"
	untracked string catalog = "file:SiStripFedCablingCatalog.xml"
	string timetype = "runnumber"
	untracked uint32 authenticationMethod = 1
	untracked uint32 messagelevel = 10
    }
    
    es_module = SiStripConnectivity {}

    # tracker geometry
    include "Geometry/TrackerRecoData/data/trackerRecoGeometryXML.cfi"
    es_module = TrackerDigiGeometryESModule {}
    es_module = TrackerGeometricDetESModule {}

    include "EventFilter/SiStripRawToDigi/data/DigiToRaw.cfi"
    replace DigiToRaw.InputModuleLabel = "siStripDigis"  
    replace DigiToRaw.FedReadoutMode = "ZERO_SUPPRESSED" 

    include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
    include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer.cfi"
	replace siStripClusters.DigiProducersList = 
	{
	    { 
		string DigiProducer = "SiStripDigis"
		string DigiLabel    = "ZeroSuppressed"
	    }
	}	
    
    include "EventFilter/SiStripRawToDigi/data/Performance.cff"
    replace Performance.InputModuleLabel = "siStripClusters"
    replace Performance.UnpackingModuleLabels = {"SiStripDigis","siStripClusters"}
    replace Performance.TreeName = "RawToDigisToClusters"

    include "DQM/SiStripCommon/data/EventAnalyzer.cfi"

    module PoolOutput = PoolOutputModule
    { 
        untracked string fileName = "PoolOutput.root"        
        untracked vstring outputCommands = { "keep *" } 
    }
    
    path p = {DigiToRaw, SiStripDigis, siStripClusters, Performance}//,EventAnalyzer}
    //endpath e = { PoolOutput }    
}
