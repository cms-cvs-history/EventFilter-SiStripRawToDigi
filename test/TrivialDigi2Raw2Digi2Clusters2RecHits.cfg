
process TrivialDigi2Raw2Digi2Clusters2RecHits = 
{
    # message logger
    include "DQM/SiStripCommon/data/MessageLogger.cfi"

    # event setup
    include "Configuration/StandardSequences/data/Geometry.cff"
    include "Configuration/StandardSequences/data/MagneticField.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakeConditions.cff"
    include "CalibTracker/SiStripConnectivity/data/SiStripRegionConnectivity.cfi"
    include "Alignment/CommonAlignmentProducer/data/FakeAlignmentSource.cfi"


    # trivial source
    include "IORawData/SiStripInputSources/data/EmptySource.cff"
    include "EventFilter/SiStripRawToDigi/test/data/SiStripTrivialClusterSource.cfi"
    replace maxEvents.input = 20
   
    # digi-to-raw
    include "EventFilter/SiStripRawToDigi/data/SiStripDigiToRaw.cfi"
    replace SiStripDigiToRaw.InputModuleLabel = "ClusterSource"  
    replace SiStripDigiToRaw.InputDigiLabel = "" 
    
    # raw-to-digi
    include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
    replace siStripDigis.ProductLabel = SiStripDigiToRaw

    # digi-to-clusters
    include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer.cfi"
    replace siStripClusters.DigiProducersList = {{ string DigiProducer = "siStripDigis" string DigiLabel = "ZeroSuppressed" }}

    # clusters-to-rechits
    include "CalibTracker/SiStripLorentzAngle/data/SiStripLAFakeESSource.cfi"
    include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"
    include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
    include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitConverter.cfi"
    replace siStripMatchedRecHits.ClusterProducer = "siStripClusters"

    # path
    path p = {ClusterSource, SiStripDigiToRaw, siStripDigis, siStripClusters, siStripMatchedRecHits}
}
