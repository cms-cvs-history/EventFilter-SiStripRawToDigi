
process TrivialDigi2Raw2Digi2Clusters = 
{
    include "DQM/SiStripCommon/data/MessageLogger.cfi"
    
    # trivial source
    include "IORawData/SiStripInputSources/data/EmptySource.cff"
    replace maxEvents.input = 10
    include "EventFilter/SiStripRawToDigi/data/TrivialClusterSource.cfi"
    
    # event data
    include "EventFilter/SiStripRawToDigi/data/Geometry.cff"
    include "EventFilter/SiStripRawToDigi/data/DBCabling.cff"
    include "CalibTracker/SiStripConnectivity/data/SiStripConnectivity.cfi"

    # digi-to-raw
    include "EventFilter/SiStripRawToDigi/data/DigiToRaw.cfi"
    replace DigiToRaw.InputModuleLabel = "ClusterSource"  
    replace DigiToRaw.FedReadoutMode = "ZERO_SUPPRESSED" 
    
    # raw-to-digi
    include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
    replace SiStripDigis.ProductLabel = "DigiToRaw"

    # digi-to-clusters
    include "CalibTracker/Configuration/data/SiStrip_FakeGain.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakeNoise.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakePedestals.cff"
    include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer.cfi"
    replace siStripClusters.DigiProducersList = 
    {
	{ 
	    string DigiProducer = "SiStripDigis"
	    string DigiLabel    = "ZeroSuppressed"
	}
    }
    
    # path
    path p = {ClusterSource, DigiToRaw, SiStripDigis, siStripClusters}
}
